# 予約サイト 手順メモ

ログイン〜予約確定までの操作手順と画面構成。自動化シナリオ設計の土台。

---

## 1. ログイン

- **URL**: https://appy-epark.com/users/login/login.php
- **方法**: メールアドレスとパスワードのみ（2要素認証・CAPTCHA なし）
- **ログイン後の画面**: マイページ（`index.php`）

---

## 2. マイページ → 予約の入口

| 項目 | 内容 |
|------|------|
| URL | `https://appy-epark.com/users/mypage/index.php` |
| クリックする要素 | **「空枠確認・予約する」**（ピンクの時計アイコン付き） |
| 備考 | 他に「予約履歴・出欠」「最新情報を見る」「講師プロフィール」等あり |

---

## 3. レッスンメニュー選択

| 項目 | 内容 |
|------|------|
| URL | `lesson-list.php` 系（レッスンメニュー一覧） |
| 表示 | 「レッスンメニューを選択してください」 |
| クリックする要素 | **「各種50分枠レッスン」** |
| 補足 | レッスン時間: 50分、定員: 1名。50分間のレッスン（ペアレッスン…）の説明あり。「続きを読む」リンクあり |

---

## 4. 予約カレンダー

| 項目 | 内容 |
|------|------|
| URL | `https://appy-epark.com/users/mypage/reservation/calendar.php` |
| タイトル | 予約カレンダー |

### 4.1 絞り込み

- **スケジュール絞込み**（開閉可能）
  - 1つ目: レッスン種別（例: **各種50分枠レッスン**）
  - 2つ目: 講師名（例: 山田 考哲）

### 4.2 週の移動

- **1ページで1週間分**のスケジュールのみ表示される。
- **「前の一週間」**: 前週へ
- **「次の一週間」**: 翌週へ（**翌月のカレンダーを表示するときはこのボタンで週を進める。空き枠を探すときも、今週に〇がなければ「次の一週間」を押して翌週を確認する**）

### 4.3 カレンダー表の見方

- **列**: 日付（例: 30 (金), 31 (土), 1 (日), 2 (月)…）。月をまたいで表示されることがある（1月30日〜2月5日など）
- **行**: 時刻（09:00, 09:30, 10:00 … 20:00 など、30分刻み想定）
- **セルの意味**:
  - **〇**: 予約可能（ここをクリックして予約に進む）
  - **満員**: 予約済みで取れない
  - **-**: 枠なし（講師不在等）

### 4.4 その他

- 下部に **「前のページに戻る」** ボタンあり

---

## 5. 予約詳細（確認・オプション・予約実行）

| 項目 | 内容 |
|------|------|
| URL | `golf-reserve-confirm.php` 系 |
| タイトル | 予約詳細 |

### 5.1 表示内容

- **予約対象**: ログイン中の氏名（例: 山田 考哲）
- **日時**: 例) 2026年02月02日 17:00 ~ 17:50
- **コース**: 各種50分枠レッスン
- **内容**: 50分間のレッスン（ペアレッスンのお客様は代表者様のみの登録とさせていただきます。）

### 5.2 オプション（必須対応）

- **マンツーマンレッスン**（チェックボックス）
- **ペアレッスン**（チェックボックス）  
  → **自動化時は「ペアレッスン」にチェックを入れる**

### 5.3 その他入力

- **練習メモ・連絡事項**: 自由入力（空欄で可）

### 5.4 ボタン

- **「予約する」**: 確定（ゴールド色の大きなボタン）
- **「前のページに戻る」**: カレンダーに戻る

### 5.5 キャンセル待ち（要確認）

- 予約と同じ流れで、月に最大10件までキャンセル待ちを登録できる。
- 予約詳細画面または同様の画面で **「キャンセル待ち」** などのボタン・リンクをクリックして登録する想定。実際のUIは要確認。

---

## 6. 自動化フロー（まとめ）

1. メールアドレス・パスワードでログイン
2. 「空枠確認・予約する」をクリック
3. 「各種50分枠レッスン」をクリック
4. 予約カレンダーで「次の一週間」を必要な回数クリックし、翌月の週を表示
5. カレンダー表で **〇** のセルを探し、条件に合う日時をクリック（月2枠まで）
6. 予約詳細で **「ペアレッスン」にチェック** を入れ、「予約する」をクリック
7. （2枠目がある場合）同様にもう1件予約
8. （2枠取れなかった場合）条件に合う〇をキャンセル待ちとして登録（最大10件）。登録した日時は waitlist.json に保存
9. （キャンセル監視）頻繁に実行する watch スクリプトで、waitlist 以外で条件に合う〇が出たら即予約

---

## 7. スクショ参照

- マイページ: `assets/screencapture-appy-epark-users-mypage-index-php-*.png`
- レッスンメニュー: `assets/screencapture-appy-epark-users-mypage-reservation-lesson-list-php-*.png`
- 予約カレンダー: `assets/screencapture-appy-epark-users-mypage-reservation-calendar-php-*.png`
- 予約詳細: `assets/screencapture-appy-epark-users-mypage-golf-reserve-confirm-php-*.png`

※ 実際のスクショはワークスペースの `assets/` に保存されている場合があります。
