# 自動化前に確認すること

ツールを作る前に、以下を順に確認すると安全に進められます。

---

## 1. 予約サイトの手動操作（最優先）

**目的**: ログイン〜予約完了までの流れと画面構造を把握する。

- [x] ログイン方法を確認する
  - **ID/パスワードのみ**（メールアドレスとパスワードでログイン）
- [x] ログイン後、予約カレンダー（`calendar.php`）に遷移する手順をメモする
  - メールアドレスとパスワードでログイン → **「空枠確認・予約する」**をクリック → **「各種50分枠レッスン」**をクリック → 〇になっているところが予約可能 → **「ペアレッスン」にチェックを入れて予約する**
- [x] 「翌月」のカレンダーを表示する操作（ボタン・リンク・日付の切り替え）を確認する
  - **「次の一週間」**ボタンで週単位で進める（UIは画像添付済み）
- [x] 空き枠がある日を選んで、予約を確定するまで一通り操作する
- [x] 各ステップのURL・ボタン/リンクの位置・表示テキストをメモ or スクショする
  - スクショ添付済み（マイページ → レッスンメニュー選択 → カレンダー → 予約詳細）

**成果物**: [手順メモ.md](手順メモ.md) を参照。

---

## 2. 利用規約・自動アクセスの可否

**目的**: スクリプトでのアクセスが禁止されていないか確認する。

- [x] サイトの利用規約・禁止事項を読む
- [x] 「自動アクセス」「ボット」「スクレイピング」等の記載があるか確認する
  - **なし**（該当記載なし）
- [ ] 不明な場合は運営に問い合わせる（任意）

---

## 3. 技術的に邪魔になる要素の有無

**目的**: 完全自動化が難しくなる要因を把握する。

- [x] ログイン時や予約確定時に **CAPTCHA（画像認証）** が出るか → **なし**
- [x] **ワンタイムパスワード** や **SMS認証** が必須か → **なし**
- [x] 予約開放直後（23日22時）に **アクセス集中で落ちる・重い** ような傾向があるか（口コミ等） → **あるかも**（考慮しておく）

CAPTCHA や SMS が必須だと、完全無人自動化は難しくなる。その場合は「開くところまで自動＋予約クリックは手動」などの折衷案を検討する。

---

## 4. 条件の決め方（自分用の仕様）

**目的**: ツールに「どの日を狙うか」をどう渡すか決める。

- [x] 希望のパターンを1つ決める  
  例: 「第1週と最終週の土曜」「第2週と第4週の日曜」「中1週は避ける」など
- [x] それを **設定ファイル** で書くか **スプレッドシート** で管理するか方針を決める
  - **推奨の方法でよい**（設定ファイル or スプレッドシート）。**可能な日付**と**時間帯**（例: 17時〜18時 のように記載）を入力できるようにする。
- [x] 月によって変える必要があるなら、その入力方法（1行で書く、フォームで選ぶ等）を決める
  - **毎月 Slack 等でリマインダーを送り、そのタイミングでどこか（スプレッドシート・フォーム等）に入力する**運用とする。
- [x] **その月の予約開始日時**も入力できるようにする
  - 月によって予約開始日時が違う場合（例: 今月だけ24日10時など）に対応するため、インプット時に「予約可能開始日時」も指定できるようにする。未指定の場合はデフォルト（23日22時）。

ここが決まると、ツールの入力仕様と「忘れないようにする」リマインダーの内容が具体化する。

---

## 5. 実行環境の方針

**目的**: どこで「23日22時にスクリプトを動かすか」を決める。

- [x] **自宅PC** で動かすか（23日22時にPCが起動している必要がある）
- [x] **常時動いているサーバー or クラウド**（cron / GitHub Actions / GAS 等）で動かすか
  - **可能なら GAS または GitHub Actions がよい。起動されたら通知が欲しい**（Slack 等で「予約スクリプトを実行しました」と通知する）。
- [ ] ブラウザ自動化（Playwright 等）を使う場合、その環境でヘッドレスブラウザが動くか

23日22時ちょうどに確実に実行したいなら、cron や GAS の Time-driven トリガーなど、時間指定できる環境が向いている。

---

## 進め方の目安

| 順番 | やること | 目安時間 |
|------|----------|----------|
| 1 | 上記「1. 予約サイトの手動操作」を実施し、手順をメモする | 30分〜1時間 |
| 2 | 「2. 利用規約」を確認する | 10分程度 |
| 3 | 「3. CAPTCHA等」を手動操作のついでに確認する | 手順メモに追記 |
| 4 | 1〜3の結果を踏まえ、完全自動か半自動か方針を決める | - |
| 5 | 「4. 条件の決め方」「5. 実行環境」を決めてから設計・実装に入る | - |

**まずは「1. 予約サイトの手動操作」から始める**と、その後の設計がしやすくなります。
